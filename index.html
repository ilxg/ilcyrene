<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Monthly Expenditure</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 900px; margin: 24px auto; padding: 0 16px; }
        form { display: grid; grid-template-columns: 1fr 180px 120px auto; gap: 8px; align-items: end; margin-bottom: 16px; }
        table { width: 100%; border-collapse: collapse; margin-top: 8px; }
        th, td { border: 1px solid #fcf9f9; padding: 8px; text-align: left; }
        th { background: #f4f4f4; }
        .right { text-align: right; }
        .controls { margin-top: 12px; display:flex; gap: 10px; align-items:center; }
        button { padding: 6px 10px; }
    </style>
</head>
<body>
    <h1>Monthly Expenditure</h1>

    <form id="expense-form">
        <div>
            <label>Description<br/>
                <input type="text" name="desc" placeholder="e.g. Groceries" required />
            </label>
        </div>

        <div>
            <label>Amount<br/>
                <input type="number" name="amount" step="0.01" min="0" placeholder="0.00" required />
            </label>
        </div>

        <div>
            <label>Category<br/>
                <select name="category">
                    <option>Food</option>
                    <option>Rent</option>
                    <option>Transport</option>
                    <option>Utilities</option>
                    <option>Other</option>
                </select>
            </label>
        </div>

        <div>
            <button type="submit">Add</button>
        </div>
    </form>

    <div class="controls">
        <strong>Total: $<span id="total">0.00</span></strong>
        <button id="clear-all">Clear All</button>
    </div>

    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Category</th>
                <th>Description</th>
                <th class="right">Amount ($)</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="expenses-body">
            <!-- rows inserted here -->
        </tbody>
    </table>

    <script>
        const form = document.getElementById('expense-form');
        const tbody = document.getElementById('expenses-body');
        const totalEl = document.getElementById('total');
        const clearBtn = document.getElementById('clear-all');

        let expenses = JSON.parse(localStorage.getItem('expenses') || '[]');

        function save() {
            localStorage.setItem('expenses', JSON.stringify(expenses));
            render();
        }

        function render() {
            tbody.innerHTML = '';
            let total = 0;
            expenses.forEach((e, i) => {
                total += Number(e.amount) || 0;
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${e.date || ''}</td>
                    <td>${e.category}</td>
                    <td>${e.desc}</td>
                    <td class="right">${Number(e.amount).toFixed(2)}</td>
                    <td><button data-index="${i}" class="delete">Delete</button></td>
                `;
                tbody.appendChild(tr);
            });
            totalEl.textContent = total.toFixed(2);
            document.querySelectorAll('.delete').forEach(btn =>
                btn.addEventListener('click', () => {
                    expenses.splice(Number(btn.dataset.index), 1);
                    save();
                })
            );
        }

        form.addEventListener('submit', e => {
            e.preventDefault();
            const formData = new FormData(form);
            const expense = {
                date: new Date().toLocaleDateString(),
                category: formData.get('category'),
                desc: formData.get('desc').trim(),
                amount: parseFloat(formData.get('amount')) || 0
            };
            if (!expense.desc || expense.amount <= 0) {
                alert('Enter a valid description and a positive amount.');
                return;
            }
            expenses.push(expense);
            save();
            form.reset();
        });

        clearBtn.addEventListener('click', () => {
            if (confirm('Clear all expenses?')) {
                expenses = [];
                save();
            }
        });

        // initial render
        render();
    </script>
</body>
</html>